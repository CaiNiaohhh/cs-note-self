sql的执行过程：https://juejin.cn/post/6844903655439597582
- 客户端发送一条查询给服务器。
- 服务器先检查查询缓存，如果命中了缓存，则立刻返回存储在缓存中的结果。否则进入下一阶段。
- 服务器端进行SQL解析、预处理，再由优化器生成对应的执行计划。
- MySQL根据优化器生成的执行计划，再调用存储引擎的API来执行查询。
- 将结果返回给客户端。

####mysql分库分表
https://juejin.cn/post/6844903648670007310
- 垂直分表：
也就是“大表拆小表”，基于列字段进行的。一般是表中的字段较多，将不常用的， 数据较大，长度较长（比如text类型字段）的拆分到“扩展表“。 一般是针对那种几百列的大表，也避免查询时，数据量太大造成的“跨页”问题。
- 垂直分库：将表垂直拆分后放到不同的服务器，数据库里面，，避免IO瓶颈
- 水平拆分
- 水平分表 针对数据量巨大的单张表（比如订单表），按照某种规则（RANGE,HASH取模等），切分到多张表里面去。 但是这些表还是在同一个库中，所以库级别的数据库操作还是有IO瓶颈。不建议采用。 
  - 水平分库分表：将单张表的数据切分到多个服务器上去，每个服务器具有相应的库与表，只是表中数据集合不同。 水平分库分表能够有效的缓解单机和单库的性能瓶颈和压力，突破IO、连接数、硬件资源等的瓶颈。 
  - 水平分库分表切分规则
    - RANGE
      从0到10000一个表，10001到20000一个表；
    - HASH取模
      一个商场系统，一般都是将用户，订单作为主表，然后将和它们相关的作为附表，这样不会造成跨库事务之类的问题。 取用户id，然后hash取模，分配到不同的数据库上。
    - 地理区域：比如按照华东，华南，华北这样来区分业务，七牛云应该就是如此。
    - 时间：按照时间切分，就是将6个月前，甚至一年前的数据切出去放到另外的一张表，因为随着时间流逝，这些表的数据 被查询的概率变小，所以没必要和“热数据”放在一起，这个也是“冷热数据分离”。

####char vs varchar
char：定长，效率高，一般用于固定长度的表单提交数据存储；例如：身份证号，手机号，电话，密码等。数据不够会填充空格
varchar：不定长，效率偏低。
大文本使用text
---
如果我给你7个字节的字符串，插入char(6)和varchar(6)会发生什么？
两个都报错，提示 Data too long for column ....

查询语句大全
常用子句及其固定顺序：
Select 选择的变量/列名
from 来源数据集/表名
where 选择条件
group by 分组标志（变量）
having 针对组的选择条件
order by 排序标志（变量）
其中只有select和from是必须的，其他子句都是可选的
SELECT * FROM `content` AS t1    
JOIN (SELECT id FROM `content` ORDER BY id desc LIMIT ".($page-1)*$pagesize.", 1) AS t2    
WHERE t1.id <= t2.id ORDER BY t1.id desc LIMIT $pagesize;

####B+树
MYSQL中的页是16K
假设一个节点中存的是主键+指针 （8 + 6）byte,这样可以第一层就可以存16*1024/14=1170个。
1170 * 1170 * 16（16K） = 2KW  所以业界一般使用3层来存储就足够了